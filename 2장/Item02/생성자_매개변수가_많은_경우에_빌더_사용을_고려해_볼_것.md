> REFERENCE:
>

[ì´í™í‹°ë¸Œ ìë°” Effective Java 3/E - YES24](http://www.yes24.com/Product/Goods/65551284)

[study/effective-java at master Â· keesun/study](https://github.com/keesun/study/tree/master/effective-java)

[[ì´íŒ©í‹°ë¸Œ ìë°”] #1 ìƒì„±ì ëŒ€ì‹  static íŒ©í† ë¦¬ ë©”ì†Œë“œë¥¼ ê³ ë ¤í•´ ë³¼ ê²ƒ](https://www.youtube.com/watch?v=X7RXP6EI-5E&list=PLfI752FpVCS8e5ACdi5dpwLdlVkn0QgJJ)

---

# ìƒì„±ìì— ë§¤ê°œë³€ìˆ˜ê°€ ë§ë‹¤ë©´ ë¹Œë”ë¥¼ ê³ ë ¤í•˜ë¼.

## ìƒì„±ìì™€ ì •ì  íŒ©í„°ë¦¬ëŠ” ë§¤ê°œë³€ìˆ˜ê°€ ë§ì„ ë–„ ì ì ˆí•œ ëŒ€ì‘ ì–´ë µë‹¤.

```java
public class User {
    private final int age;             // í•„ìˆ˜
    private final int phoneNumber;     // í•„ìˆ˜
    private final int weight;          // ì„ íƒ
    private final int tall;            // ì„ íƒ
}
```

ì ì¸µì  ìƒì„±ì íŒ¨í„´ìœ¼ë¡œ ìƒì„±ì„ í•´ë³´ì.

```java
private User(int age, int phoneNumber) {
    this.age = age;
    this.phoneNumber = phoneNumber;
}

private User(int age, int phoneNumber, int weight) {
    this(age, phoneNumber);
    this.weight = weight;
}

private User(int age, int phoneNumber, int weight, int tall) {
    this(age, phoneNumber);
    this.weight = weight;
    this.tall = tall;
}

private User(int age, int phoneNumber, int weight, int tall, int birthday) {
    this(age, phoneNumber);
    this.weight = weight;
    this.tall = tall;
    this.birthday = birthday;
}
```

```java
User user = new User(20, 99998888, 70, 180, 1225);
```

ë§¤ê°œë³€ìˆ˜ê°€ ëŠ˜ì–´ë‚  ìˆ˜ë¡ ì½”ë“œë¥¼ ì‘ì„±í•˜ê±°ë‚˜ ì½ê¸° ì–´ë µë‹¤. ì™œ ì–´ë ¤ìš¸ê¹Œ?

- ê°’ì´ ë¬´ì—‡ì¸ì§€ í—·ê°ˆë¦¬ê¸° ì‹œì‘í•œë‹¤.
- ë§¤ê°œ ë³€ìˆ˜ê°€ ëª‡ê°œì¸ì§€ ë†“ì¹˜ëŠ” ê²½ìš°ê°€ ë°œìƒí•œë‹¤.
- ìˆœì„œê°€ ë°”ë€Œê²Œ ëœë‹¤ë©´ ì»´íŒŒì¼ëŸ¬ëŠ” ì•Œì•„ì±Œ ìˆ˜ ì—†ë‹¤.

## ìë°”ë¹ˆì¦ˆ íŒ¨í„´ì„ ë³´ì.

ë˜ ë‹¤ë¥¸ ëŒ€ì•ˆìœ¼ë¡œëŠ” ì•„ë¬´ëŸ° ë§¤ê°œë³€ìˆ˜ë¥¼ ë°›ì§€ ì•ŠëŠ” ìƒì„±ìë¥¼ ì´ìš©í•´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ê³ , `Setter`ë¥¼ ì‚¬ìš©í•´ì„œ í•„ìš”í•œ í•„ë“œë§Œ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.

```java
public class User {
    private int age = 26;
    private int phoneNumber = 12345678;
    private int weight;
    private int tall;

    public void setAge(final int age) { this.age = age; }
    public void setPhoneNumber(final int phoneNumber) { this.phoneNumber = phoneNumber; }
    public void setWeight(final int weight) { this.weight = weight; }
    public void setTall(final int tall) { this.tall = tall; }
}

User user = new User();
user.setAge(20);
user.setPhoneNumber(99999999);
user.setWeight(70);
user.setTall(180);
```

í•˜ì§€ë§Œ ì•„ì§ê¹Œì§€ ë‹¨ì ì´ ë” í¬ê²Œ ë³´ì¸ë‹¤.

- ê°ì²´ í•˜ë‚˜ë¥¼ ë§Œë“œë ¤ë©´ ë©”ì†Œë“œë¥¼ ì—¬ëŸ¬ ë²ˆ í˜¸ì¶œí•´ì•¼í•œë‹¤.
- **`ìë¹ˆì´ ì¤‘ê°„ì— ì‚¬ìš©ë˜ëŠ” ê²½ìš°ì— ì•ˆì •ì ì´ì§€ ì•Šì€ ìƒíƒœë¡œ ì‚¬ìš©ë  ì—¬ì§€ê°€ ìˆë‹¤.`**
- ë¶ˆë³€ í´ë˜ìŠ¤ë¡œ ë§Œë“¤ì§€ ëª»í•˜ì—¬ ì“°ë ˆë“œ ì•ˆì •ì„±ì„ ë³´ì¥í•˜ë ¤ê³  ì¶”ê°€ì ì¸ ìˆ˜ê³ ê°€ í•„ìš”í•˜ë‹¤.
- ê°ì²´ê°€ ì™„ì „íˆ ìƒì„±ë˜ê¸° ì „ê¹Œì§€ëŠ” ì¼ê´€ì„±ì´ ë¬´ë„ˆì§„ ìƒíƒœê°€ ëœë‹¤.
- ì¼ê´€ì„±ì´ ê¹¨ì§„ ê°ì²´ë¥¼ ë§Œë“¤ë©´ ë²„ê·¸ë¥¼ ì‹¬ì€ ì½”ë“œì™€ ë²„ê·¸ ë•Œë¬¸ì— ë””ë²„ê¹…ì´ ì‰½ì§€ ì•Šë‹¤.

## ê·¸ë ‡ë‹¤. ë¹Œë”íŒ¨í„´

`**ìƒì„±ì íŒ¨í„´ì˜ ì•ˆì „ì„± + ìë°”ë¹ˆì¦ˆ íŒ¨í„´ì˜ ê°€ë…ì„±**`ì„ ê°€ì§ˆ ìˆ˜ ìˆëŠ” ê²ƒì´  ë°”ë¡œ ë¹Œë” íŒ¨í„´ì¸ ê²ƒì´ë‹¤.

```java
public class User {
    private final int age;
    private final int phoneNumber;
    private int weight;
    private int tall;

    public User(Builder builder) {
        this.age = builder.age;
        this.phoneNumber = builder.phoneNumber;
        this.weight = builder.weight;
        this.tall = builder.tall;
    }

    public static class Builder {
        private final int age;
        private final int phoneNumber;
        private int weight;
        private int tall;

        public Builder(int age, int phoneNumber) {
            this.age = age;
            this.phoneNumber = phoneNumber;
        }

        public Builder weight(int weight) {
						// validation ê°€ëŠ¥
            this.weight = weight;
            return this;
        }

        public Builder tall(int tall) {
            this.tall = tall;
            return this;
        }

        public User build() {
            return new User(this);
        }
    }
}

User user = new User.Builder(20, 99998888)
                .weight(70)
                .tall(180)
                .birthday(1225)
                .build();
```

User í´ë˜ìŠ¤ëŠ” ë¶ˆë³€í•˜ê²Œ ë˜ì—ˆê³ , ëª¨ë“  ë§¤ê°œë³€ìˆ˜ì˜ ê¸°ë³¸ ê°’ë“¤ì„ í•œ ê³³ì— ëª¨ì•„ë’€ë‹¤.

ë¹Œë”ì˜ ìƒì„±ìë‚˜ ë©”ì†Œë“œì—ì„œ ìœ íš¨ì„± í™•ì¸ì„ í•  ìˆ˜ë„ ìˆê³  ì—¬ëŸ¬ ë§¤ê°œë³€ìˆ˜ë¥¼ í˜¼í•©í•´ì„œ í™•ì¸í•´ì•¼ í•˜ëŠ” ê²½ìš°ì—ëŠ”Â `build` ë©”ì†Œë“œì—ì„œ í˜¸ì¶œí•˜ëŠ” ìƒì„±ìì—ì„œ í•  ìˆ˜ ìˆë‹¤. ë¹Œë”ì—ì„œ ë§¤ê°œë³€ìˆ˜ë¥¼ ê°ì²´ë¡œ ë³µì‚¬í•´ì˜¨ ë‹¤ìŒì— í™•ì¸í•˜ê³  (ì•„ì´í…œ 50), ê²€ì¦ì— ì‹¤íŒ¨í•˜ë©´Â `IllegalArgumentException`
ì„ ë˜ì§€ê³  (ì•„ì´í…œ 72) ì—ëŸ¬ ë©”ì‹œì§€ë¡œ ì–´ë–¤ ë§¤ê°œë³€ìˆ˜ê°€ ì˜ëª»ëëŠ”ì§€ ì•Œë ¤ì¤„ ìˆ˜ ìˆë‹¤. (ì•„ì´í…œ 75)

<aside>
ğŸ’¡ ë¹Œë” íŒ¨í„´ì— ìì„¸íˆ ì•Œê³  ì‹¶ë‹¤ë©´?

[ë¹Œë”(Builder) íŒ¨í„´](https://www.notion.so/Builder-cf789394f93444068a00818f74ad900a)

</aside>

ì´ëŸ° ë°©ì‹ì„ í”Œë£¨ì–¸íŠ¸ API í˜¹ì€ ë©”ì†Œë“œ ì—°ì‡„(ì²´ì¸)ì´ë¼ê³  í•œë‹¤. ë¹Œë” íŒ¨í„´ì€ ê³„ì¸µì ìœ¼ë¡œ ì„¤ê³„ëœ í´ë˜ìŠ¤ì™€ í•¨ê»˜ ì“°ê¸°ì— ì¢‹ë‹¤. ê° ê³„ì¸µì˜ í´ë˜ìŠ¤ì— ê´€ë ¨ ë¹Œë”ë¥¼ ë©¤ë²„ë¡œ ì •ì˜í•˜ê³  ì¶”ìƒ í´ë˜ìŠ¤ëŠ” ì¶”ìƒ ë¹Œë”ë¥¼ êµ¬ì²´ í´ë˜ìŠ¤ëŠ” êµ¬ì²´ ë¹Œë”ë¥¼ ê°–ê²Œ ëœë‹¤.

ì´í•´ê°€ ì˜ ì•ˆë ê²ƒì´ë‹¤. ì•„ë˜ ì½”ë“œë¥¼ í†µí•´ì„œ ìì„¸íˆ ì•Œì•„ë³´ì.

```java
class Hamburger {

    public enum Topping {CHEESE, TOMATO, ONION, LETTUCE}

    final Set<Topping> toppings;

    Hamburger(Builder<?> builder) {
        toppings = builder.toppings;
    }

    abstract static class Builder<T extends Builder<T>> { // `ì¬ê·€ì ì¸ íƒ€ì… ë§¤ê°œë³€ìˆ˜`

        EnumSet<Topping> toppings = EnumSet.noneOf(Topping.class);

        public T addTopping(Topping topping) {
            toppings.add(topping);
            return self();
        }

        abstract Hamburger build(); // `Convariant ë¦¬í„´ íƒ€ì…`ì„ ìœ„í•œ ì¤€ë¹„ì‘ì—…

        protected abstract T self(); // `self-type` ê°œë…ì„ ì‚¬ìš©í•´ì„œ ë©”ì†Œë“œ ì²´ì´ë‹ì´ ê°€ëŠ¥ì¼€ í•¨
    }
}
```

```java
public class McDonaldHamburger extends Hamburger {

    public enum Size {SMALL, MEDIUM, LARGE}

    private final Size size;

    public static class Builder extends Hamburger.Builder<Builder> {
        private final Size size;

        public Builder(Size size) {
            this.size = Objects.requireNonNull(size);
        }

        @Override
        Hamburger build() {
            return new McDonaldHamburger(this);
        }

        @Override
        protected Builder self() {
            return this;
        }
    }

    public McDonaldHamburger(Builder builder) {
        super(builder);
        size = builder.size;
    }
}
```

ë¹Œë” íŒ¨í„´ì€ ìƒë‹¹íˆ ìœ ì—°í•˜ë‹¤. ë¹Œë” í•˜ë‚˜ë¡œ ì—¬ëŸ¬ ê°ì²´ë¥¼ ìˆœíšŒí•˜ë©´ì„œ ë§Œë“¤ ìˆ˜ ìˆê³  ë¹Œë”ì— ë„˜ê¸°ëŠ” ë§¤ê°œë³€ìˆ˜ì— ë”°ë¼ ë‹¤ë¥¸ ê°ì²´ë¥¼ ë§Œë“¤ ìˆ˜ë„ ìˆë‹¤.

ì¥ì ë§Œ ìˆëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤. ê°ì²´ë¥¼ ë§Œë“¤ë ¤ë©´ ë¹Œë”ë¶€í„° ë§Œë“¤ì–´ì•¼ í•œë‹¤. ì„±ëŠ¥ì— ë¯¼ê°í•œ ìƒí™©ì—ì„œëŠ” ë¬¸ì œê°€ ë  ìˆ˜ ìˆë‹¤. ë§¤ê°œë³€ìˆ˜ê°€ **4ê°œ**ëŠ” ë„˜ì–´ì•¼ ê°’ì–´ì¹˜ë¥¼ í•œë‹¤.