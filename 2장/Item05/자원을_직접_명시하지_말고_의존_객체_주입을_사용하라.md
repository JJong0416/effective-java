> REFERENCE:
>

[ì´í™í‹°ë¸Œ ìë°” Effective Java 3/E - YES24](http://www.yes24.com/Product/Goods/65551284)

[study/effective-java at master Â· keesun/study](https://github.com/keesun/study/tree/master/effective-java)

[Functional Interfaceë€](https://tecoble.techcourse.co.kr/post/2020-07-17-Functional-Interface/)

[https://github.com/woowacourse-study/2022-effective-java](https://github.com/woowacourse-study/2022-effective-java)

[[ì´íŒ©í‹°ë¸Œ ìë°”] #5 ì˜ì¡´ì„± ì£¼ì…](https://www.youtube.com/watch?v=24scqT2_m4U&list=PLfI752FpVCS8e5ACdi5dpwLdlVkn0QgJJ&index=5)

---

ëŒ€ë¶€ë¶„ì˜ í´ë˜ìŠ¤ëŠ” ì—¬ëŸ¬ ë¦¬ì†ŒìŠ¤ì— ì˜ì¡´í•˜ê²Œ ë©ë‹ˆë‹¤. ì´ ì±…ì—ì„œëŠ” SpellCheckerì™€ Dictionaryë¥¼ ì˜ˆë¡œ ë“¤ê³  ìˆë‹¤. ì¦‰, SpellCheckê°€ Dictionaryë¥¼ ì‚¬ìš©í•˜ê³ , ì´ë¥¼ ì˜ì¡´í•˜ëŠ”  ë¦¬ì†ŒìŠ¤ë¥¼ ì˜ì¡´ì„±ì´ë¼ê³  ë¶€ë¦…ë‹ˆë‹¤. ì´ ë•Œ, SpellCheckë¥¼ ë‹¤ìŒê³¼ ê°™ì´ êµ¬í˜„í•˜ëŠ” ê²½ìš°ê°€ ë§ë‹¤.

## ë¶€ì ì ˆí•œ êµ¬í˜„

### static ìœ í‹¸ í´ë˜ìŠ¤(ì•„ì´í…œ 4)

```java
public class SpellChecker {
    private static final Lexicon dictionary = new KoreanDictionary();

    private SpellChecker(){
        // NonInstantiable
    }

    public static boolean isValid(String word){
        throw new UnsupportedOperationException();
    }

    public static List<String> suggestions(String typo) {
        throw new UnsupportedOperationException();
    }
}

public interface Lexicon { ... }

public class KoreanDictionary implements Lexicon{ ... }
```

ë¹„ìŠ·í•˜ê²Œ, ì‹±ê¸€í†¤ìœ¼ë¡œ êµ¬í˜„í•˜ëŠ” ê²½ìš°ë„ í”í•˜ë‹¤.

### ì‹±ê¸€í†¤ìœ¼ë¡œ êµ¬í˜„(ì•„ì´í…œ 3)

```java
// ë¶€ì ì ˆí•œ ì‹±ê¸€í†¤ ì‚¬ìš© ì˜ˆ - ìœ ì—°í•˜ì§€ ì•Šê³  í…ŒìŠ¤íŠ¸ í•  ìˆ˜ ì—†ë‹¤.
public class SpellChecker {

    private final Lexicon dictionary = new KoreanDicationry();

    private SpellChecker() {
    }

    public static final SpellChecker INSTANCE = new SpellChecker() {
    };

    public boolean isValid(String word) {
        throw new UnsupportedOperationException();
    }

    public List<String> suggestions(String typo) {
        throw new UnsupportedOperationException();
    }
}
```

ì‚¬ì „ì€ í•˜ë‚˜ë§Œ ì‚¬ìš©í• êº¼ë¼ë©´ ìœ„ì™€ ê°™ì€ êµ¬í˜„ë„ ë§Œì¡±ìŠ¤ëŸ¬ìš¸ ìˆ˜ ìˆê² ì§€ë§Œ, ì‹¤ì œë¡œëŠ” ê° ì–¸ì–´ì˜ ë§ì¶¤ë²• ê²€ì‚¬ê¸°ëŠ” ì‚¬ìš©í•˜ëŠ” ì‚¬ì „ì´ ê°ê¸° ë‹¤ë¥´ë‹¤. ë˜í•œ, í…ŒìŠ¤íŠ¸ ì½”ë“œì—ì„œ í…ŒìŠ¤íŠ¸ìš© ì‚¬ì „ì„ ì‚¬ìš©í•˜ê³  ì‹¶ì„ìˆ˜ë„ ìˆë‹¤.

**ì–´ë–¤ í´ë˜ìŠ¤ê°€ ì‚¬ìš©í•˜ëŠ” ë¦¬ì†ŒìŠ¤ì— ë”°ë¼ í–‰ë™ì„ ë‹¬ë¦¬í•´ì•¼í•˜ëŠ” ê²½ìš°ì—ëŠ” static Utility Classì™€ Singletonì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ ë¶€ì ì ˆí•˜ë‹¤.**

ê·¸ëŸ° ìš”êµ¬ì‚¬í•­ì„ ë§Œì¡±í•  ìˆ˜ ìˆëŠ” ê°„ë‹¨í•œ íŒ¨í„´ìœ¼ë¡œ ìƒì„±ìë¥¼ ì‚¬ìš©í•´ì„œ ìƒˆ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•  ë•Œ ì‚¬ìš©í•  ë¦¬ì†ŒìŠ¤ë¥¼ ë„˜ê²¨ì£¼ëŠ” ë°©ë²•ì´ ìˆë‹¤.

## ì ì ˆí•œ êµ¬í˜„

```java
public class SpellChecker {

    private final Lexicon dictionary;

    public SpellChecker(Lexicon dictionary) {
        this.dictionary = Objects.requireNonNull(dictionary);
    }

    public boolean isValid(String word) {
        throw new UnsupportedOperationException();
    }
    
    public List<String> suggestions(String typo) {
        throw new UnsupportedOperationException();
    }

}

class Lexicon {}
```

ìœ„ì™€ ê°™ì€ ì˜ì¡´ì„± ì£¼ì…ì€ ìƒì„±ì, ìŠ¤íƒí‹± íŒ©í† ë¦¬ ê·¸ë¦¬ê³  ë¹Œë”ì—ë„ ì ìš©í•  ìˆ˜ ìˆë‹¤.

ì´ íŒ¨í„´ì˜ ë³€ì¢…ìœ¼ë¡œ ë¦¬ì†ŒìŠ¤ì˜ íŒ©í† ë¦¬ë¥¼ ìƒì„±ìì— ì „ë‹¬í•˜ëŠ” ë°©ë²•ë„ ìˆë‹¤. ì´ ë°©ë²•ì€ ìë°”8ì— ë“¤ì–´ì˜¨
`Supplier<T>` ì¸í„°í˜ì´ìŠ¤ê°€ ê·¸ëŸ° íŒ©í† ë¦¬ë¡œ ì“°ê¸°ì— ì™„ë²½í•˜ë‹¤. `Supplier<T>`ë¥¼ ì¸ìë¡œ ë°›ëŠ” ë©”ì†Œë“œëŠ” ë³´í†µ `bounded wildcard type`Â (ì•„ì´í…œ31)ìœ¼ë¡œ ì…ë ¥ì„ ì œí•œí•´ì•¼ í•œë‹¤.

```java
Mosaic create(Supplier<? extends Tile> tileFactory) { ... }
```

ì˜ì¡´ì„± ì£¼ì…ì´ ìœ ì—°í•¨ê³¼ í…ŒìŠ¤íŠ¸ ìš©ì´í•¨ì„ í¬ê²Œ í–¥ìƒ ì‹œì¼œì£¼ì§€ë§Œ, ì˜ì¡´ì„±ì´ ë§ì€ í° í”„ë¡œì íŠ¸ì˜ ê²½ìš°ì—ëŠ” ì½”ë“œê°€ ì¥í™©í•´ì§ˆ ìˆ˜ ìˆë‹¤. ê·¸ ì ì„ ëŒ€ê±°(Dagger), ì¥¬ìŠ¤(Guice), ìŠ¤í”„ë§(Spring)ê³¼ ê°™ì€ í”„ë ˆì„ì›Œí¬ì—ì„œ ì‚¬ìš©í•´ì„œ í•´ê²°í•  ìˆ˜ ìˆë‹¤.

### ìš”ì•½

**ìš”ì•½í•˜ìë©´ ì˜ì¡´í•˜ëŠ” ë¦¬ì†ŒìŠ¤ì— ë”°ë¼ í–‰ë™ì„ ë‹¬ë¦¬í•˜ëŠ” í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ ë•ŒëŠ” ì‹±ê¸€í†¤ì´ë‚˜ ìŠ¤íƒœí‹± ìœ í‹¸ í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì§€ ë§ì.**

ê·¸ëŸ° ê²½ìš°ì—ëŠ” ë¦¬ì†ŒìŠ¤ë¥¼ ìƒì„±ìë‚˜ íŒ©í† ë¦¬ë¡œ ì „ë‹¬í•˜ëŠ” ì˜ì¡´ì„± ì£¼ì…ì„ ì‚¬ìš©í•´ì„œ ìœ ì—°í•¨, ì¬ì‚¬ìš©ì„±, í…ŒìŠ¤íŠ¸ ìš©ì´ì„±ì„ ê°€ì ¸ê°€ì.

## Etc) Next-step Lotto

```java
public class AutoLottoNumberGenerator {
    private static final List<Integer> LOTTO_TOTAL_NUMBERS = IntStream.range(1,45)
            .boxed()
            .collect(Collectors.toList());

    private AutoLottoNumberGenerator(){
        // NonInstantiable
    }

    public static List<Integer> generate(int size){
        List<Integer> lottoTotalNumbers = new ArrayList<>(LOTTO_TOTAL_NUMBERS);
        Collections.shuffle(lottoTotalNumbers);

        return lottoTotalNumbers.stream()
                .limit(size)
                .collect(Collectors.toList());
    }
}
```

**AutoLottoNumberGenerator í´ë˜ìŠ¤**ëŠ” ë¡œë˜ ë²ˆí˜¸ë¥¼ ìë™ìœ¼ë¡œ ìƒì„±í•˜ê¸° ìœ„í•œ `ì •ì  ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤`ì´ë‹¤.

```java
public class Lotto {

    private static final int DEFAULT_LOTTO_NUMBERS_SIZE = 6;

    private final Set<LottoNumber> lottoNumbers;

    public Lotto() {
        List<Integer> numbers = AutoLottoNumberGenerator.generate**(DEFAULT_LOTTO_NUMBERS_SIZE);
        this.lottoNumbers = numbers.stream()
                .map(LottoNumber::new)
                .collect(toSet());
    }

    public Set<LottoNumber> getLottoNumbers() {
        return Collections.unmodifiableSet(lottoNumbers);
    }
}
```

**Lotto í´ë˜ìŠ¤**ëŠ” 6ìë¦¬ì˜ ë¡œë˜ ë²ˆí˜¸ ë¦¬ìŠ¤íŠ¸ë¥¼ ê°€ì§„ ì¼ê¸‰ ì»¬ë ‰ì…˜ì´ë‹¤. Lottoë¥¼ ìƒì„±í•˜ëŠ” ì‹œì ì— ìœ„ì—ì„œ ì‘ì„±í•œ ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤ë¥¼ í™œìš©í•˜ì—¬ ëœë¤ìœ¼ë¡œ ë²ˆí˜¸ë¥¼ ìƒì„±í•œ ë’¤ í™œìš©í•œë‹¤.

í•˜ì§€ë§Œ ìœ„ì™€ ê°™ì€ ë°©ë²•ì€ ìë™ ìƒì„±ì„ ìœ„í•œ AutoLottoNumberGenerator ì—ë§Œ ì˜ì¡´í•˜ê³  ìˆë‹¤. ë§Œì•½ ìš”êµ¬ì‚¬í•­ì´ ì¶”ê°€ë˜ì–´ `ìˆ˜ë™ìœ¼ë¡œ ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ëŠ” ê¸°ëŠ¥`ì„ ì¶”ê°€í•´ì•¼ í•œë‹¤ë©´, Lotto í´ë˜ìŠ¤ë¥¼ ì§ì ‘ ìˆ˜ì •í•˜ì—¬ ë°˜ì˜í•´ì•¼ í•œë‹¤. ì´ê²ƒì´ ì˜ë¯¸í•˜ëŠ” ê²ƒì€ ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ì˜ í•µì‹¬ ë„ë©”ì¸ì„ ìˆ˜ì • í•´ì•¼ë§Œ ë°˜ì˜ì´ ê°€ëŠ¥í•˜ë‹¤ëŠ” ì˜ë¯¸ë‹¤.

ìœ„ì—ì„œ ë§í–ˆë˜ ê²ƒ ì²˜ëŸ¼, **ì´ë ‡ê²Œ ì‚¬ìš©í•˜ëŠ” ìì›ì— ë”°ë¼ ë™ì‘ì´ ë‹¬ë¼ì§€ëŠ” í´ë˜ìŠ¤ì—ëŠ” ì •ì  ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤ë‚˜ ì‹±ê¸€í†¤ ë°©ì‹ì€ ì í•©í•˜ì§€ ì•Šë‹¤ëŠ” ê²ƒì´ë‹¤.**

ê·¸ë ‡ê¸°ì— Lotto í´ë˜ìŠ¤ëŠ” ë‹¤ì–‘í•œ Lotto ìƒì„± ì „ëµì„ ê°€ì§ˆ ìˆ˜ ìˆì–´ì•¼ í•œë‹¤. ì´ê²ƒì„ ì´ë¤„ë‚´ê¸° ìœ„í•´ì„œëŠ” **ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•  ë•Œ ìƒì„±ìì— í•„ìš”í•œ ìì›ì„ ë„˜ê²¨ì£¼ëŠ” ë°©ì‹ì„ í™œìš©**í•´ì•¼í•œë‹¤.

### ì˜ì¡´ ê°ì²´ ì£¼ì…

ìœ„ ì˜ˆì œë¥¼ ìƒì„±ìë¥¼ í†µí•´ ì˜ì¡´ ê°ì²´ë¥¼ ì£¼ì…í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ë³€ê²½í•˜ì˜€ë‹¤. ìš°ì„  ë²ˆí˜¸ ìƒì„± ì „ëµì„ êµ¬í˜„í•˜ê¸° ìœ„í•œ LottoNumberGenerator ì¸í„°í˜ì´ìŠ¤ì´ë‹¤.

```java
@FunctionalInterface
public interface LottoNumberGenerator {

    List<Integer> generate(int size);
}
```

ì¶”ìƒ ë©”ì†Œë“œë¥¼ ì˜¤ì§ 1ê°œë§Œ ê°€ì§„ ì¸í„°í˜ì´ìŠ¤ì´ê¸° ë•Œë¬¸ì— í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ë¡œ í™œìš©ì´ ê°€ëŠ¥í•˜ê³ , í•´ë‹¹ ì¸í„°í˜ì´ìŠ¤ë¥¼ ê°€ì§€ê³  ìë™ ìƒì„± ê¸°ëŠ¥ì„ ì‘ì„±í•  ê²ƒì´ë‹¤.

<aside>
ğŸ’¡ @FunctionalInterfaceì´ë€?

ë‹¨ í•˜ë‚˜ì˜ ì¶”ìƒ ë©”ì†Œë“œë¥¼ ê°€ì§„ ì¸í„°í˜ì´ìŠ¤. - *[Java Language Specification](https://docs.oracle.com/javase/specs/jls/se8/html/jls-9.html#jls-9.8)*

í•´ë‹¹ ì• ë…¸í…Œì´ì…˜ì€ Functional Interfaceì„ ëª…ì‹œí•˜ê¸° ìœ„í•´ ì‚¬ìš©í•©ë‹ˆë‹¤. Functional Interfaceë¥¼ ì‚¬ìš©í•˜ë©´ ë¶€ì ì ˆí•œ ë©”ì†Œë“œë¥¼ ì¶”ê°€í•˜ê±°ë‚˜ ë‹¤ë¥¸ ì¸í„°í˜ì´ìŠ¤ë¥¼ ìƒì†ë°›ìœ¼ë©´ ì»´íŒŒì¼ ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤.

íŒŒë¼ë¯¸í„° íƒ€ì…ì„ ë°›ì•„, í•¨ìˆ˜í˜•ìœ¼ë¡œ ì‘ì„±í•¨ìœ¼ë¡œì¨ ì½”ë“œê°€ ë” ê°„ê²°í•´ì§€ê³  ê°€ë…ì„±ì´ ë†’ì•„ì§„ë‹¤.

</aside>

```java
public class AutoLottoNumberGenerator implements LottoNumberGenerator {

    private static final int START_INCLUSIVE = 1;
    private static final int END_INCLUSIVE = 45;

    private static final List<Integer> LOTTO_TOTAL_NUMBERS =
            IntStream.rangeClosed(START_INCLUSIVE, END_INCLUSIVE)
                    .boxed()
                    .collect(Collectors.toList());

    @Override
    public List<Integer> generate(int size) {
        List<Integer> lottoTotalNumbers = new ArrayList<>(LOTTO_TOTAL_NUMBERS);
        Collections.shuffle(lottoTotalNumbers);

        return lottoTotalNumbers.stream()
                .limit(size)
                .collect(Collectors.toList());
    }
}
```

í•´ë‹¹ ì½”ë“œë¥¼ ë³´ë©´ ëŒ€ë¶€ë¶„ì˜ êµ¬í˜„ì€ ìœ ì‚¬í•˜ì§€ë§Œ, ë” ì´ìƒ ì •ì ìœ¼ë¡œ  generate ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤. ë”°ë¼ì„œ, Lotto í´ë˜ìŠ¤ë¥¼ ì•„ë˜ì™€ ê°™ì´ ë°”ê¿€ ìˆ˜ ìˆë‹¤.

```java
public class Lotto {
    private static final int DEFAULT_LOTTO_NUMBERS_SIZE = 6;

    private final Set<LottoNumber> lottoNumbers;

    public Lotto(LottoNumberGenerator lottoNumberGenerator){
        List<Integer> numbers = lottoNumberGenerator.generate(DEFAULT_LOTTO_NUMBERS_SIZE);
        this.lottoNumbers = numbers.stream()
                .map(LottoNumber::new)
                .collect(Collectors.toSet());
    }

    public Set<LottoNumber> getLottoNumbers() {
        return Collections.unmodifiableSet(lottoNumbers);
    }
}
```

## ì´ë ‡ê²Œ í•¨ìœ¼ë¡œì¨ ì–´ë–¤ ì¥ì ì´ ìˆì„ê¹Œ?

ì˜ì¡´ ê°ì²´ ì£¼ì… íŒ¨í„´ì€ í•´ë‹¹ ê°ì²´ì—ê²Œ ìœ ì—°ì„±ì„ ë¶€ì—¬í•´ì£¼ê³  **`í…ŒìŠ¤íŠ¸ì˜ ìš©ì´ì„±ì„ ê°œì„ `** í•´ì¤€ë‹¤. ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤ì— ì˜ì¡´ì„±ì„ ê°€ì§„ ê¸°ì¡´ ì½”ë“œë¥¼ í…ŒìŠ¤íŠ¸ í•˜ê¸° ìœ„í•´ì„œëŠ” ëœë¤ìœ¼ë¡œ ìƒì„±ëœ ë¡œë˜ ë²ˆí˜¸ë¥¼ í™œìš©í•´ì•¼ í•œë‹¤. ì´ê²ƒì€ í™•ì‹¤í•œ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•˜ëŠ” ë°©ë²•ì´ ì•„ë‹ˆë‹¤.

```java
class LottoTest {

    @DisplayName("ìë™ìœ¼ë¡œ ë¡œë˜ ë²ˆí˜¸ë¥¼ ë°œê¸‰ ë°›ëŠ”ë‹¤.")
    @Test
    void ìë™_ë¡œë˜_ë²ˆí˜¸_ë°œê¸‰() {
        // given & when & then
        assertThat(new Lotto().getLottoNumbers())
                .isNotIn(new LottoNumber(0), new LottoNumber(46)); // ì ì ˆ í•œê°€?
    }
}
```

ì˜ì¡´ ê°ì²´ ì£¼ì… ì²˜ëŸ¼ ìƒì„± ì‹œì ì— ë¡œë˜ ë²ˆí˜¸ ìƒì„± ì „ëµì„ ì£¼ì…í•´ì£¼ê²Œ ë˜ë©´ ì™¸ë¶€ì—ì„œ ë²ˆí˜¸ ìƒì„±ì„ ê´€ë¦¬í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— í…ŒìŠ¤íŠ¸ ìœ ì—°ì„±ì´ ì¦ê°€í•œë‹¤.

```java
class LottoTest {

    @DisplayName("ìˆ˜ë™ìœ¼ë¡œ ë¡œë˜ ë²ˆí˜¸ë¥¼ ìƒì„±í•œë‹¤.")
    @Test
    void ìˆ˜ë™_ë¡œë˜_ë²ˆí˜¸_ìƒì„±() {
        // given
        List<Integer> numbers = List.of(1, 2, 3, 4, 5);
        LottoNumberGenerator lottoNumberGenerator = (size) -> numbers;

        // when
        Lotto lotto = new Lotto(lottoNumberGenerator);

        // then
        assertThat(lotto.getLottoNumbers())
                .contains(new LottoNumber(1),
                        new LottoNumber(2),
                        new LottoNumber(3),
                        new LottoNumber(4),
                        new LottoNumber(5));
    }
}
```

ì´ë ‡ê²Œ ìˆ˜ë™ìœ¼ë¡œ, ê·¸ë¦¬ê³  ìë™ìœ¼ë¡œ ìœ ì—°í•œ ê°œë°œì´ ê°€ëŠ¥í•˜ê²Œ ëœë‹¤.